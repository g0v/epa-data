// Generated by LiveScript 1.2.0
(function(){
  var json_filename, cache_dir, raw_dir, fs, proj, map, TWD97TM2, transform;
  json_filename = '土壤及地下水污染場址基本資料.json';
  cache_dir = 'cache';
  raw_dir = 'raw';
  fs = require('fs');
  proj = require('proj4');
  map = require('prelude-ls').map;
  TWD97TM2 = proj.defs["EPSG:3826"] = "+title=TWD97 TM2+proj=tmerc +lat_0=0 +lon_0=121 +k=0.9999 +x_0=250000 +y_0=0 +ellps=GRS80 +units=公尺 +no_defs";
  transform = function(point){
    return proj(TWD97TM2, 'EPSG:4326', point);
  };
  fs.writeFileSync(raw_dir + '/' + json_filename, JSON.stringify(
  function(d){
    return {
      type: 'FeatureCollection',
      features: d
    };
  }(
  map(function(d){
    return {
      type: 'Feature',
      properties: d,
      geometry: {
        type: 'Point',
        coordinates: transform([d.TWD97TM2X, d.TWD97TM2Y])
      }
    };
  })(
  JSON.parse(
  fs.readFileSync(cache_dir + '/' + json_filename))))));
}).call(this);
